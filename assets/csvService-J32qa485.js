import{I as oi,b as ci}from"./index-0SqNhF8x.js";const li=(i,o)=>{var f,e,r,s,n,d,u,c,b,l,_,y,A,v,I,g,Q,h,C,T,S,E,$,k,D,H,N,R,F,O,U,m,x,q,w,L,V,B,J,j,G,P,Y,z,K,M,W,X,Z,p,tt,it,et,dt,rt,st,ut,at,nt,ft,ot,ct,bt,lt,_t,yt,At,vt,It,gt,Qt,ht,Ct,Tt,St,Et,$t,kt,Dt,Ht,Nt,Rt,Ft,Ot,Ut,mt,xt,qt,wt,Lt,Vt,Bt,Jt,jt,Gt,Pt,Yt,zt,Kt,Mt,Wt,Xt,Zt,pt,ti,ii,ei,di,ri,si,ui,ai,ni,fi;return["",(()=>{if(o==="es"&&i.date){const t=i.date.split("-");if(t.length===3)return`${t[2]}/${t[1]}/${t[0]}`}return i.date})(),i.time,i.evaluator,i.sampleCode,i.sampleInfo,((f=i.attributes.find(t=>t.id==="cacao"))==null?void 0:f.score)||0,((e=i.attributes.find(t=>t.id==="acidity"))==null?void 0:e.score)||0,((n=(s=(r=i.attributes.find(t=>t.id==="acidity"))==null?void 0:r.subAttributes)==null?void 0:s.find(t=>t.id==="acid_fruity"))==null?void 0:n.score)||0,((c=(u=(d=i.attributes.find(t=>t.id==="acidity"))==null?void 0:d.subAttributes)==null?void 0:u.find(t=>t.id==="acid_acetic"))==null?void 0:c.score)||0,((_=(l=(b=i.attributes.find(t=>t.id==="acidity"))==null?void 0:b.subAttributes)==null?void 0:l.find(t=>t.id==="acid_lactic"))==null?void 0:_.score)||0,((v=(A=(y=i.attributes.find(t=>t.id==="acidity"))==null?void 0:y.subAttributes)==null?void 0:A.find(t=>t.id==="acid_mineral"))==null?void 0:v.score)||0,((I=i.attributes.find(t=>t.id==="bitterness"))==null?void 0:I.score)||0,((g=i.attributes.find(t=>t.id==="astringency"))==null?void 0:g.score)||0,((Q=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:Q.score)||0,((T=(C=(h=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:h.subAttributes)==null?void 0:C.find(t=>t.id==="ff_berry"))==null?void 0:T.score)||0,(($=(E=(S=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:S.subAttributes)==null?void 0:E.find(t=>t.id==="ff_citrus"))==null?void 0:$.score)||0,((H=(D=(k=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:k.subAttributes)==null?void 0:D.find(t=>t.id==="ff_dark"))==null?void 0:H.score)||0,((F=(R=(N=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:N.subAttributes)==null?void 0:R.find(t=>t.id==="ff_pulp"))==null?void 0:F.score)||0,((m=(U=(O=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:O.subAttributes)==null?void 0:U.find(t=>t.id==="ff_tropical"))==null?void 0:m.score)||0,((x=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:x.score)||0,((L=(w=(q=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:q.subAttributes)==null?void 0:w.find(t=>t.id==="bf_dried"))==null?void 0:L.score)||0,((J=(B=(V=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:V.subAttributes)==null?void 0:B.find(t=>t.id==="bf_brown"))==null?void 0:J.score)||0,((P=(G=(j=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:j.subAttributes)==null?void 0:G.find(t=>t.id==="bf_overripe"))==null?void 0:P.score)||0,((Y=i.attributes.find(t=>t.id==="vegetal"))==null?void 0:Y.score)||0,((M=(K=(z=i.attributes.find(t=>t.id==="vegetal"))==null?void 0:z.subAttributes)==null?void 0:K.find(t=>t.id==="veg_green"))==null?void 0:M.score)||0,((Z=(X=(W=i.attributes.find(t=>t.id==="vegetal"))==null?void 0:W.subAttributes)==null?void 0:X.find(t=>t.id==="veg_earthy"))==null?void 0:Z.score)||0,((p=i.attributes.find(t=>t.id==="floral"))==null?void 0:p.score)||0,((et=(it=(tt=i.attributes.find(t=>t.id==="floral"))==null?void 0:tt.subAttributes)==null?void 0:it.find(t=>t.id==="flo_orange"))==null?void 0:et.score)||0,((st=(rt=(dt=i.attributes.find(t=>t.id==="floral"))==null?void 0:dt.subAttributes)==null?void 0:rt.find(t=>t.id==="flo_flowers"))==null?void 0:st.score)||0,((ut=i.attributes.find(t=>t.id==="woody"))==null?void 0:ut.score)||0,((ft=(nt=(at=i.attributes.find(t=>t.id==="woody"))==null?void 0:at.subAttributes)==null?void 0:nt.find(t=>t.id==="wood_light"))==null?void 0:ft.score)||0,((bt=(ct=(ot=i.attributes.find(t=>t.id==="woody"))==null?void 0:ot.subAttributes)==null?void 0:ct.find(t=>t.id==="wood_dark"))==null?void 0:bt.score)||0,((yt=(_t=(lt=i.attributes.find(t=>t.id==="woody"))==null?void 0:lt.subAttributes)==null?void 0:_t.find(t=>t.id==="wood_resin"))==null?void 0:yt.score)||0,((At=i.attributes.find(t=>t.id==="spice"))==null?void 0:At.score)||0,((gt=(It=(vt=i.attributes.find(t=>t.id==="spice"))==null?void 0:vt.subAttributes)==null?void 0:It.find(t=>t.id==="sp_spices"))==null?void 0:gt.score)||0,((Ct=(ht=(Qt=i.attributes.find(t=>t.id==="spice"))==null?void 0:Qt.subAttributes)==null?void 0:ht.find(t=>t.id==="sp_tobacco"))==null?void 0:Ct.score)||0,((Et=(St=(Tt=i.attributes.find(t=>t.id==="spice"))==null?void 0:Tt.subAttributes)==null?void 0:St.find(t=>t.id==="sp_savory"))==null?void 0:Et.score)||0,(($t=i.attributes.find(t=>t.id==="nutty"))==null?void 0:$t.score)||0,((Ht=(Dt=(kt=i.attributes.find(t=>t.id==="nutty"))==null?void 0:kt.subAttributes)==null?void 0:Dt.find(t=>t.id==="nut_meat"))==null?void 0:Ht.score)||0,((Ft=(Rt=(Nt=i.attributes.find(t=>t.id==="nutty"))==null?void 0:Nt.subAttributes)==null?void 0:Rt.find(t=>t.id==="nut_skin"))==null?void 0:Ft.score)||0,((Ot=i.attributes.find(t=>t.id==="caramel"))==null?void 0:Ot.score)||0,((Ut=i.attributes.find(t=>t.id==="sweetness"))==null?void 0:Ut.score)||0,((mt=i.attributes.find(t=>t.id==="roast"))==null?void 0:mt.score)||0,((xt=i.attributes.find(t=>t.id==="defects"))==null?void 0:xt.score)||0,((Lt=(wt=(qt=i.attributes.find(t=>t.id==="defects"))==null?void 0:qt.subAttributes)==null?void 0:wt.find(t=>t.id==="def_dirty"))==null?void 0:Lt.score)||0,((Jt=(Bt=(Vt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Vt.subAttributes)==null?void 0:Bt.find(t=>t.id==="def_mold"))==null?void 0:Jt.score)||0,((Pt=(Gt=(jt=i.attributes.find(t=>t.id==="defects"))==null?void 0:jt.subAttributes)==null?void 0:Gt.find(t=>t.id==="def_moldy"))==null?void 0:Pt.score)||0,((Kt=(zt=(Yt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Yt.subAttributes)==null?void 0:zt.find(t=>t.id==="def_meaty"))==null?void 0:Kt.score)||0,((Xt=(Wt=(Mt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Mt.subAttributes)==null?void 0:Wt.find(t=>t.id==="def_over"))==null?void 0:Xt.score)||0,((ti=(pt=(Zt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Zt.subAttributes)==null?void 0:pt.find(t=>t.id==="def_manure"))==null?void 0:ti.score)||0,((di=(ei=(ii=i.attributes.find(t=>t.id==="defects"))==null?void 0:ii.subAttributes)==null?void 0:ei.find(t=>t.id==="def_smoke"))==null?void 0:di.score)||0,((ui=(si=(ri=i.attributes.find(t=>t.id==="defects"))==null?void 0:ri.subAttributes)==null?void 0:si.find(t=>t.id==="def_other"))==null?void 0:ui.score)||0,`"${(((fi=(ni=(ai=i.attributes.find(t=>t.id==="defects"))==null?void 0:ai.subAttributes)==null?void 0:ni.find(t=>t.id==="def_other"))==null?void 0:fi.description)||"").replace(/"/g,'""')}"`,`"${i.notes.replace(/"/g,'""')}"`,`"${i.producerRecommendations.replace(/"/g,'""')}"`,i.globalQuality,i.selectedQualityId==="uniqueness"?10:0,i.selectedQualityId==="complexity"?10:0,i.selectedQualityId==="balance"?10:0,i.selectedQualityId==="cleanliness"?10:0,i.selectedQualityId==="q_acidity"?10:0,i.selectedQualityId==="q_astringency"?10:0,i.selectedQualityId==="q_bitterness"?10:0,i.selectedQualityId==="q_aftertaste"?10:0]},_i=(i,o)=>({sampleCode:i.metadata.sampleCode,date:i.metadata.date,time:i.metadata.time,evaluator:i.metadata.evaluator,evaluationType:i.metadata.evaluationType,sampleInfo:i.metadata.sampleInfo,notes:i.metadata.notes,producerRecommendations:i.metadata.producerRecommendations,attributes:i.attributes,globalQuality:i.globalQuality,selectedQualityId:i.selectedQualityId,language:o,id:"temp",createdAt:Date.now(),updatedAt:Date.now()}),yi=(i,o)=>{const a=(e,r,s)=>{if(e[r]!==void 0)return e[r];if(e[s]!==void 0)return e[s];const n=Object.keys(e).find(d=>d.trim()===r||d.trim()===s);return n?e[n]:""},f=(e,r,s)=>{const n=a(e,r,s),d=parseFloat(n);return isNaN(d)?0:d};return i.map(e=>{const r={sampleCode:a(e,"CoEx Sample Code","ID de muestra")||"Unknown",date:a(e,"Date Eval (press Ctrl and ;)","Fecha de evaluaci贸n"),time:a(e,"Time Eval (press Ctrl and :)","Hora de evaluaci贸n"),evaluator:a(e,"Panelist Initials","Evaluador"),evaluationType:"cacao_mass",sampleInfo:a(e,"Sample Information","Informaci贸n de muestra"),notes:a(e,"Overall Flavour comment","Comentario de sabor general"),producerRecommendations:a(e,"Feedback comment","Comentarios de comentarios"),globalQuality:f(e,"Global Quality (0 - 10)","Calidad global (0 - 10)"),language:o,selectedQualityId:void 0,attributes:JSON.parse(JSON.stringify(oi))};if(r.date&&r.date.includes("/")){const d=r.date.split("/");d.length===3&&(r.date=`${d[2]}-${d[1]}-${d[0]}`)}r.attributes.forEach(d=>{d.score=f(e,d.csvHeaderEn,d.csvHeaderEs),d.subAttributes&&d.subAttributes.forEach(u=>{u.score=f(e,u.csvHeaderEn,u.csvHeaderEs),u.id==="def_other"&&(u.description=a(e,"Other Off-Flavour Description","Descripci贸n"))})});let s=0,n;return ci.forEach(d=>{const u=f(e,d.csvHeaderEn,d.csvHeaderEs);u>s&&(s=u,n=d.id)}),s>0&&(r.selectedQualityId=n),r}).filter(e=>e.sampleCode&&e.sampleCode!=="Unknown")};export{li as generateCSVRow,_i as generateShimmedSample,yi as parseSamplesFromCSV};
