import{I as oi,a as bi}from"./index-CO0rhzbM.js";const _i=(i,o)=>{var c,e,r,s,f,d,u,b,a,_,y,A,l,v,I,g,Q,h,C,E,T,S,$,k,H,N,D,F,O,R,U,x,q,L,V,B,J,j,w,G,P,Y,z,K,M,W,X,Z,m,p,tt,it,et,dt,rt,st,ut,nt,ft,ct,ot,bt,at,_t,yt,At,lt,vt,It,gt,Qt,ht,Ct,Et,Tt,St,$t,kt,Ht,Nt,Dt,Ft,Ot,Rt,Ut,xt,qt,Lt,Vt,Bt,Jt,jt,wt,Gt,Pt,Yt,zt,Kt,Mt,Wt,Xt,Zt,mt,pt,ti,ii,ei,di,ri,si,ui,ni,fi,ci;return["",(()=>{if(o==="es"&&i.date){const t=i.date.split("-");if(t.length===3)return`${t[2]}/${t[1]}/${t[0]}`}return i.date})(),i.time,i.evaluator,i.sampleCode,i.sampleInfo,((c=i.attributes.find(t=>t.id==="cacao"))==null?void 0:c.score)||0,((e=i.attributes.find(t=>t.id==="acidity"))==null?void 0:e.score)||0,((f=(s=(r=i.attributes.find(t=>t.id==="acidity"))==null?void 0:r.subAttributes)==null?void 0:s.find(t=>t.id==="acid_fruity"))==null?void 0:f.score)||0,((b=(u=(d=i.attributes.find(t=>t.id==="acidity"))==null?void 0:d.subAttributes)==null?void 0:u.find(t=>t.id==="acid_acetic"))==null?void 0:b.score)||0,((y=(_=(a=i.attributes.find(t=>t.id==="acidity"))==null?void 0:a.subAttributes)==null?void 0:_.find(t=>t.id==="acid_lactic"))==null?void 0:y.score)||0,((v=(l=(A=i.attributes.find(t=>t.id==="acidity"))==null?void 0:A.subAttributes)==null?void 0:l.find(t=>t.id==="acid_mineral"))==null?void 0:v.score)||0,((I=i.attributes.find(t=>t.id==="bitterness"))==null?void 0:I.score)||0,((g=i.attributes.find(t=>t.id==="astringency"))==null?void 0:g.score)||0,((Q=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:Q.score)||0,((E=(C=(h=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:h.subAttributes)==null?void 0:C.find(t=>t.id==="ff_berry"))==null?void 0:E.score)||0,(($=(S=(T=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:T.subAttributes)==null?void 0:S.find(t=>t.id==="ff_citrus"))==null?void 0:$.score)||0,((N=(H=(k=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:k.subAttributes)==null?void 0:H.find(t=>t.id==="ff_dark"))==null?void 0:N.score)||0,((O=(F=(D=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:D.subAttributes)==null?void 0:F.find(t=>t.id==="ff_pulp"))==null?void 0:O.score)||0,((x=(U=(R=i.attributes.find(t=>t.id==="fresh_fruit"))==null?void 0:R.subAttributes)==null?void 0:U.find(t=>t.id==="ff_tropical"))==null?void 0:x.score)||0,((q=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:q.score)||0,((B=(V=(L=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:L.subAttributes)==null?void 0:V.find(t=>t.id==="bf_dried"))==null?void 0:B.score)||0,((w=(j=(J=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:J.subAttributes)==null?void 0:j.find(t=>t.id==="bf_brown"))==null?void 0:w.score)||0,((Y=(P=(G=i.attributes.find(t=>t.id==="browned_fruit"))==null?void 0:G.subAttributes)==null?void 0:P.find(t=>t.id==="bf_overripe"))==null?void 0:Y.score)||0,((z=i.attributes.find(t=>t.id==="vegetal"))==null?void 0:z.score)||0,((W=(M=(K=i.attributes.find(t=>t.id==="vegetal"))==null?void 0:K.subAttributes)==null?void 0:M.find(t=>t.id==="veg_green"))==null?void 0:W.score)||0,((m=(Z=(X=i.attributes.find(t=>t.id==="vegetal"))==null?void 0:X.subAttributes)==null?void 0:Z.find(t=>t.id==="veg_earthy"))==null?void 0:m.score)||0,((p=i.attributes.find(t=>t.id==="floral"))==null?void 0:p.score)||0,((et=(it=(tt=i.attributes.find(t=>t.id==="floral"))==null?void 0:tt.subAttributes)==null?void 0:it.find(t=>t.id==="flo_orange"))==null?void 0:et.score)||0,((st=(rt=(dt=i.attributes.find(t=>t.id==="floral"))==null?void 0:dt.subAttributes)==null?void 0:rt.find(t=>t.id==="flo_flowers"))==null?void 0:st.score)||0,((ut=i.attributes.find(t=>t.id==="woody"))==null?void 0:ut.score)||0,((ct=(ft=(nt=i.attributes.find(t=>t.id==="woody"))==null?void 0:nt.subAttributes)==null?void 0:ft.find(t=>t.id==="wood_light"))==null?void 0:ct.score)||0,((at=(bt=(ot=i.attributes.find(t=>t.id==="woody"))==null?void 0:ot.subAttributes)==null?void 0:bt.find(t=>t.id==="wood_dark"))==null?void 0:at.score)||0,((At=(yt=(_t=i.attributes.find(t=>t.id==="woody"))==null?void 0:_t.subAttributes)==null?void 0:yt.find(t=>t.id==="wood_resin"))==null?void 0:At.score)||0,((lt=i.attributes.find(t=>t.id==="spice"))==null?void 0:lt.score)||0,((gt=(It=(vt=i.attributes.find(t=>t.id==="spice"))==null?void 0:vt.subAttributes)==null?void 0:It.find(t=>t.id==="sp_spices"))==null?void 0:gt.score)||0,((Ct=(ht=(Qt=i.attributes.find(t=>t.id==="spice"))==null?void 0:Qt.subAttributes)==null?void 0:ht.find(t=>t.id==="sp_tobacco"))==null?void 0:Ct.score)||0,((St=(Tt=(Et=i.attributes.find(t=>t.id==="spice"))==null?void 0:Et.subAttributes)==null?void 0:Tt.find(t=>t.id==="sp_savory"))==null?void 0:St.score)||0,(($t=i.attributes.find(t=>t.id==="nutty"))==null?void 0:$t.score)||0,((Nt=(Ht=(kt=i.attributes.find(t=>t.id==="nutty"))==null?void 0:kt.subAttributes)==null?void 0:Ht.find(t=>t.id==="nut_meat"))==null?void 0:Nt.score)||0,((Ot=(Ft=(Dt=i.attributes.find(t=>t.id==="nutty"))==null?void 0:Dt.subAttributes)==null?void 0:Ft.find(t=>t.id==="nut_skin"))==null?void 0:Ot.score)||0,((Rt=i.attributes.find(t=>t.id==="caramel"))==null?void 0:Rt.score)||0,((Ut=i.attributes.find(t=>t.id==="sweetness"))==null?void 0:Ut.score)||0,((xt=i.attributes.find(t=>t.id==="roast"))==null?void 0:xt.score)||0,((qt=i.attributes.find(t=>t.id==="defects"))==null?void 0:qt.score)||0,((Bt=(Vt=(Lt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Lt.subAttributes)==null?void 0:Vt.find(t=>t.id==="def_dirty"))==null?void 0:Bt.score)||0,((wt=(jt=(Jt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Jt.subAttributes)==null?void 0:jt.find(t=>t.id==="def_mold"))==null?void 0:wt.score)||0,((Yt=(Pt=(Gt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Gt.subAttributes)==null?void 0:Pt.find(t=>t.id==="def_moldy"))==null?void 0:Yt.score)||0,((Mt=(Kt=(zt=i.attributes.find(t=>t.id==="defects"))==null?void 0:zt.subAttributes)==null?void 0:Kt.find(t=>t.id==="def_meaty"))==null?void 0:Mt.score)||0,((Zt=(Xt=(Wt=i.attributes.find(t=>t.id==="defects"))==null?void 0:Wt.subAttributes)==null?void 0:Xt.find(t=>t.id==="def_over"))==null?void 0:Zt.score)||0,((ti=(pt=(mt=i.attributes.find(t=>t.id==="defects"))==null?void 0:mt.subAttributes)==null?void 0:pt.find(t=>t.id==="def_manure"))==null?void 0:ti.score)||0,((di=(ei=(ii=i.attributes.find(t=>t.id==="defects"))==null?void 0:ii.subAttributes)==null?void 0:ei.find(t=>t.id==="def_smoke"))==null?void 0:di.score)||0,((ui=(si=(ri=i.attributes.find(t=>t.id==="defects"))==null?void 0:ri.subAttributes)==null?void 0:si.find(t=>t.id==="def_other"))==null?void 0:ui.score)||0,`"${(((ci=(fi=(ni=i.attributes.find(t=>t.id==="defects"))==null?void 0:ni.subAttributes)==null?void 0:fi.find(t=>t.id==="def_other"))==null?void 0:ci.description)||"").replace(/"/g,'""')}"`,`"${i.notes.replace(/"/g,'""')}"`,`"${i.producerRecommendations.replace(/"/g,'""')}"`,i.globalQuality,i.selectedQualityId==="uniqueness"?10:0,i.selectedQualityId==="complexity"?10:0,i.selectedQualityId==="balance"?10:0,i.selectedQualityId==="cleanliness"?10:0,i.selectedQualityId==="q_acidity"?10:0,i.selectedQualityId==="q_astringency"?10:0,i.selectedQualityId==="q_bitterness"?10:0,i.selectedQualityId==="q_aftertaste"?10:0]},yi=(i,o)=>{const n=(e,r,s)=>{if(e[r]!==void 0)return e[r];if(e[s]!==void 0)return e[s];const f=Object.keys(e).find(d=>d.trim()===r||d.trim()===s);return f?e[f]:""},c=(e,r,s)=>{const f=n(e,r,s),d=parseFloat(f);return isNaN(d)?0:d};return i.map(e=>{const r={sampleCode:n(e,"CoEx Sample Code","ID de muestra")||"Unknown",date:n(e,"Date Eval (press Ctrl and ;)","Fecha de evaluaci贸n"),time:n(e,"Time Eval (press Ctrl and :)","Hora de evaluaci贸n"),evaluator:n(e,"Panelist Initials","Evaluador"),evaluationType:"cacao_mass",sampleInfo:n(e,"Sample Information","Informaci贸n de muestra"),notes:n(e,"Overall Flavour comment","Comentario de sabor general"),producerRecommendations:n(e,"Feedback comment","Comentarios de comentarios"),globalQuality:c(e,"Global Quality (0 - 10)","Calidad global (0 - 10)"),language:o,selectedQualityId:void 0,attributes:JSON.parse(JSON.stringify(oi))};if(r.date&&r.date.includes("/")){const d=r.date.split("/");d.length===3&&(r.date=`${d[2]}-${d[1]}-${d[0]}`)}r.attributes.forEach(d=>{d.score=c(e,d.csvHeaderEn,d.csvHeaderEs),d.subAttributes&&d.subAttributes.forEach(u=>{u.score=c(e,u.csvHeaderEn,u.csvHeaderEs),u.id==="def_other"&&(u.description=n(e,"Other Off-Flavour Description","Descripci贸n"))})});let s=0,f;return bi.forEach(d=>{const u=c(e,d.csvHeaderEn,d.csvHeaderEs);u>s&&(s=u,f=d.id)}),s>0&&(r.selectedQualityId=f),r}).filter(e=>e.sampleCode&&e.sampleCode!=="Unknown")};export{_i as generateCSVRow,yi as parseSamplesFromCSV};
